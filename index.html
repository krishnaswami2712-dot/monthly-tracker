<!DOCTYPE html>
<html lang="en">
<head>
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<title>Monthly Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0b0b0b;
    color: #eaeaea;
    margin: 0;
    padding: 12px;
}

h1 {
    font-size: 16px;
    font-weight: 500;
    margin-bottom: 8px;
}

/* Scroll wrapper */
.table-wrap {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border: 1px solid #222;
}

/* Table */
table {
    border-collapse: collapse;
    font-size: 12px;
    background: #111;
    min-width: 1000px;
}

/* Sticky task column */
th.task, td.task {
    position: sticky;
    left: 0;
    background: #111;
    z-index: 2;
    min-width: 220px;
    max-width: 220px;
}

/* Sticky delete column */
th.del, td.del {
    position: sticky;
    right: 0;
    background: #111;
    z-index: 2;
    width: 36px;
}

th, td {
    border: 1px solid #222;
    padding: 6px;
    text-align: center;
}

th {
    color: #aaa;
    font-weight: 400;
}

/* Task input */
input[type="text"] {
    width: 100%;
    border: none;
    background: transparent;
    color: #eaeaea;
    font-size: 12px;
    outline: none;
    white-space: normal;
}

/* Checkbox */
input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #3ddc84;
}

/* Buttons */
button {
    margin-top: 8px;
    margin-right: 6px;
    padding: 8px 12px;
    font-size: 12px;
    border: 1px solid #333;
    background: #0b0b0b;
    color: #eaeaea;
    cursor: pointer;
}

/* Delete button */
.del-btn {
    background: transparent;
    border: none;
    color: #777;
    font-size: 18px;
    cursor: pointer;
}
.del-btn:hover {
    color: #ff6b6b;
}

#chartBox {
    display: none;
    margin-top: 16px;
    max-width: 280px;
}
</style>
</head>
<body>

<h1>Monthly Tracker</h1>

<div class="table-wrap">
<table id="tracker">
<thead>
<tr>
    <th class="task">Task</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<button onclick="addTask()">Add task</button>
<button onclick="toggleChart()">Show progress</button>

<div id="chartBox">
    <canvas id="progressChart"></canvas>
</div>

<script>
const DAYS = 31;
let data = JSON.parse(localStorage.getItem("minimalTracker")) || [];

/* Build header */
const header = document.querySelector("#tracker thead tr");
for (let d = 1; d <= DAYS; d++) {
    const th = document.createElement("th");
    th.textContent = d;
    header.appendChild(th);
}
const delHeader = document.createElement("th");
delHeader.className = "del";
delHeader.textContent = "×";
header.appendChild(delHeader);

/* Load */
window.onload = () => {
    renderAll();
    updateChart();
};

/* Save */
function save() {
    localStorage.setItem("minimalTracker", JSON.stringify(data));
    updateChart();
}

/* Render all rows */
function renderAll() {
    const tbody = document.querySelector("#tracker tbody");
    tbody.innerHTML = "";
    data.forEach((_, i) => renderRow(i));
}

/* Add task */
function addTask() {
    data.push({ name: "", days: Array(DAYS).fill(false) });
    renderAll();
    save();
}

/* Render row */
function renderRow(index) {
    const task = data[index];
    const row = document.querySelector("#tracker tbody").insertRow();

    // Task name
    const nameCell = row.insertCell();
    nameCell.className = "task";
    const input = document.createElement("input");
    input.type = "text";
    input.placeholder = "Task name";
    input.value = task.name;
    input.oninput = () => {
        data[index].name = input.value;
        save();
    };
    nameCell.appendChild(input);

    // Days
    task.days.forEach((done, d) => {
        const cell = row.insertCell();
        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.checked = done;
        cb.onchange = () => {
            data[index].days[d] = cb.checked;
            save();
        };
        cell.appendChild(cb);
    });

    // Delete
    const delCell = row.insertCell();
    delCell.className = "del";
    const delBtn = document.createElement("button");
    delBtn.className = "del-btn";
    delBtn.textContent = "×";
    delBtn.onclick = () => {
        data.splice(index, 1);
        renderAll();
        save();
    };
    delCell.appendChild(delBtn);
}

/* Chart */
const chart = new Chart(document.getElementById("progressChart"), {
    type: "pie",
    data: {
        labels: ["Completed", "Remaining"],
        datasets: [{
            data: [0, 0],
            backgroundColor: ["#3ddc84", "#222"]
        }]
    },
    options: {
        plugins: { legend: { display: false } }
    }
});

function updateChart() {
    let completed = 0, total = 0;
    data.forEach(t => t.days.forEach(d => {
        total++;
        if (d) completed++;
    }));
    chart.data.datasets[0].data = [completed, total - completed];
    chart.update();
}

function toggleChart() {
    const box = document.getElementById("chartBox");
    box.style.display = box.style.display === "none" ? "block" : "none";
}
</script>

</body>
</html>


